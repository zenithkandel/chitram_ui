<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply as Artist - Chitram Digital Art Marketplace</title>
    <link rel="stylesheet" href="/css/apply.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>चित्रम्</h1>
            </div>
            
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <div class="nav-menu" id="navMenu">
                <button class="nav-close" id="navClose">
                    <i class="fas fa-times"></i>
                </button>
                <div class="nav-links-container">
                    <a href="/" class="nav-link">Home</a>
                    <a href="/gallery" class="nav-link">Gallery</a>
                    <a href="/artists" class="nav-link">Artists</a>
                    <a href="/about" class="nav-link">About</a>
                </div>
                <div class="nav-actions">
                    <a href="/cart" class="nav-cart-btn">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="nav-cart-text">Cart</span>
                        <span class="cart-count" id="cartCountMobile">0</span>
                    </a>
                    <a href="/apply" class="nav-apply-btn active">
                        <i class="fas fa-paint-brush"></i>
                        <span>Apply as Artist</span>
                    </a>
                    <a href="/track-orders" class="nav-track-btn">
                        <i class="fas fa-search"></i>
                        <span>Track Orders</span>
                    </a>
                </div>
            </div>
            
            <!-- Desktop Actions -->
            <div class="desktop-actions">
                <div class="dropdown">
                    <button class="dropdown-btn" id="dropdownBtn">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                        <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <a href="/apply" class="dropdown-item active">
                            <i class="fas fa-paint-brush"></i>
                            Apply as Artist
                        </a>
                        <a href="/cart" class="dropdown-item">
                            <i class="fas fa-shopping-cart"></i>
                            View Cart
                        </a>
                        <a href="/track-orders" class="dropdown-item">
                            <i class="fas fa-search"></i>
                            Track Orders
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-text">
                        <h1>Apply as <span class="highlight">Artist</span></h1>
                        <p class="hero-subtitle">Join the चित्रम् Community</p>
                        <p class="hero-description">Showcase your artwork to the world and connect with art lovers. Join our platform and start your artistic journey with us.</p>
                    </div>
                    <div class="hero-icon">
                        <div class="icon-wrapper">
                            <i class="fas fa-paint-brush"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Application Form Section -->
        <section class="application-section">
            <div class="container">
                <div class="application-form-container">
                    <div class="form-header">
                        <h2>Artist Application</h2>
                        <p>Fill out the form below to join चित्रम् as an artist and start showcasing your artwork</p>
                    </div>
                    
                    <form id="applicationForm" class="application-form" enctype="multipart/form-data">
                        <div class="form-section">
                            <h3>Personal Information</h3>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="full_name">
                                        <i class="fas fa-user"></i>
                                        Full Name *
                                    </label>
                                    <input type="text" id="full_name" name="full_name" required placeholder="Enter your full name">
                                </div>
                                <div class="form-group">
                                    <label for="age">
                                        <i class="fas fa-calendar-alt"></i>
                                        Age *
                                    </label>
                                    <input type="number" id="age" name="age" min="16" max="100" required placeholder="Your age">
                                </div>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="email">
                                        <i class="fas fa-envelope"></i>
                                        Email *
                                    </label>
                                    <input type="email" id="email" name="email" required placeholder="Enter your email address">
                                </div>
                                <div class="form-group">
                                    <label for="phone">
                                        <i class="fas fa-phone"></i>
                                        Phone
                                    </label>
                                    <input type="tel" id="phone" name="phone" placeholder="Enter your phone number">
                                </div>
                            </div>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="city">
                                        <i class="fas fa-city"></i>
                                        City *
                                    </label>
                                    <input type="text" id="city" name="city" required placeholder="Enter your city">
                                </div>
                                <div class="form-group">
                                    <label for="district">
                                        <i class="fas fa-map-marker-alt"></i>
                                        District *
                                    </label>
                                    <input type="text" id="district" name="district" required placeholder="Enter your district">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>Educational & Artistic Background</h3>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="started_art_at">
                                        <i class="fas fa-clock"></i>
                                        Started Art At
                                    </label>
                                    <input type="text" id="started_art_at" name="started_art_at" placeholder="e.g., Age 10, 2018">
                                </div>
                                <div class="form-group">
                                    <label for="school_college">
                                        <i class="fas fa-graduation-cap"></i>
                                        School/College
                                    </label>
                                    <input type="text" id="school_college" name="school_college" placeholder="Enter your educational institution">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="socials">
                                    <i class="fas fa-share-alt"></i>
                                    Social Media Links (JSON format)
                                </label>
                                <textarea id="socials" name="socials" rows="3" placeholder='{"facebook": "link", "instagram": "link", "twitter": "link"}'></textarea>
                                <small class="form-help">Enter social media links in JSON format (optional)</small>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>Profile & Bio</h3>
                            
                            <div class="form-group">
                                <label for="profile_picture">
                                    <i class="fas fa-image"></i>
                                    Profile Picture
                                </label>
                                <input type="file" id="profile_picture" name="profile_picture" accept="image/*" onchange="previewImage(this)">
                                <div id="imagePreview" class="image-preview empty">
                                    <span>No image selected</span>
                                    <img id="previewImage" class="hidden">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="bio">
                                    <i class="fas fa-user-circle"></i>
                                    Bio
                                </label>
                                <textarea id="bio" name="bio" rows="4" placeholder="Tell us about yourself and your artistic journey..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="message">
                                    <i class="fas fa-comment"></i>
                                    Message to Admin
                                </label>
                                <textarea id="message" name="message" rows="4" placeholder="Any additional message or information you'd like to share..."></textarea>
                            </div>
                        </div>
                        
                        <button type="submit" class="submit-btn" id="submitBtn">
                            <span class="btn-content">
                                <i class="fas fa-paper-plane"></i>
                                <span id="submitText">Submit Application</span>
                            </span>
                            <span id="submitSpinner" class="loading-spinner hidden">
                                <i class="fas fa-spinner fa-spin"></i>
                                Submitting...
                            </span>
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Success Message Section -->
        <section id="successSection" class="success-section hidden">
            <div class="container">
                <div class="success-message">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="success-content">
                        <h3>Application Submitted Successfully!</h3>
                        <p>Thank you for your application! We have received your artist application and will review it carefully.</p>
                        <p>You will be notified via email about the status of your application within 3-5 business days.</p>
                        <p>Welcome to the चित्रम् community!</p>
                        <div class="success-actions">
                            <button onclick="resetForm()" class="btn-secondary">
                                <i class="fas fa-plus"></i>
                                Submit Another Application
                            </button>
                            <a href="/" class="btn-primary">
                                <i class="fas fa-home"></i>
                                Go to Homepage
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Help Section -->
        <section class="help-section">
            <div class="container">
                <div class="help-content">
                    <div class="help-card">
                        <div class="help-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <h3>Need Help?</h3>
                        <p>Have questions about the application process or requirements?</p>
                        <div class="help-actions">
                            <a href="/contact" class="help-link">
                                <i class="fas fa-envelope"></i>
                                Contact Support
                            </a>
                        </div>
                    </div>
                    
                    <div class="help-card">
                        <div class="help-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <h3>Application Tips</h3>
                        <p>Tips for a successful artist application on चित्रम्.</p>
                        <div class="help-tips">
                            <div class="tip">
                                <i class="fas fa-lightbulb"></i>
                                <span>Provide a clear and professional profile picture</span>
                            </div>
                            <div class="tip">
                                <i class="fas fa-lightbulb"></i>
                                <span>Write a detailed bio about your artistic journey</span>
                            </div>
                            <div class="tip">
                                <i class="fas fa-lightbulb"></i>
                                <span>Include your social media links for better exposure</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>चित्रम् Chitram</h3>
                    <p>Digital art marketplace connecting artists with art lovers worldwide. Discover unique artworks and support talented creators.</p>
                    <div class="footer-stats">
                        <div class="footer-stat">
                            <span class="stat-number">45</span>
                            <span class="stat-label">Artists</span>
                        </div>
                        <div class="footer-stat">
                            <span class="stat-number">320</span>
                            <span class="stat-label">Artworks</span>
                        </div>
                        <div class="footer-stat">
                            <span class="stat-number">1250</span>
                            <span class="stat-label">Daily Views</span>
                        </div>
                    </div>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" aria-label="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    </div>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Explore</h4>
                        <a href="/gallery">
                            <i class="fas fa-images"></i>
                            Gallery
                        </a>
                        <a href="/artists">
                            <i class="fas fa-users"></i>
                            Artists
                        </a>
                        <a href="/about">
                            <i class="fas fa-info-circle"></i>
                            About Us
                        </a>
                        <a href="/featured">
                            <i class="fas fa-star"></i>
                            Featured
                        </a>
                    </div>
                    
                    <div class="footer-column">
                        <h4>For Artists</h4>
                        <a href="/apply">
                            <i class="fas fa-paint-brush"></i>
                            Apply Now
                        </a>
                        <a href="/commission">
                            <i class="fas fa-handshake"></i>
                            Commission Info
                        </a>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Support</h4>
                        <a href="/track-orders">
                            <i class="fas fa-search"></i>
                            Track Orders
                        </a>
                        <a href="/contact">
                            <i class="fas fa-envelope"></i>
                            Contact Us
                        </a>
                    </div>
                    
                    <div class="footer-column">
                        <h4>Connect</h4>
                        <div class="social-links">
                            <a href="#" aria-label="Facebook">
                                <i class="fab fa-facebook"></i>
                            </a>
                            <a href="#" aria-label="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#" aria-label="Twitter">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" aria-label="YouTube">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-bottom-left">
                    <p>&copy; 2024 चित्रम् Chitram. All rights reserved.</p>
                    <div class="footer-legal">
                        <a href="/privacy">Privacy Policy</a>
                        <a href="/terms">Terms of Service</a>
                        <a href="/cookies">Cookie Policy</a>
                    </div>
                </div>
                <div class="footer-bottom-right">
                    <p>Made with <i class="fas fa-heart"></i> in Nepal</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="/js/apply.js"></script>
    <script>
        // Image preview function
        function previewImage(input) {
            const preview = document.getElementById('imagePreview');
            const previewImage = document.getElementById('previewImage');
            const emptyText = preview.querySelector('span');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    previewImage.classList.remove('hidden');
                    emptyText.style.display = 'none';
                    preview.classList.remove('empty');
                }
                
                reader.readAsDataURL(input.files[0]);
            } else {
                previewImage.classList.add('hidden');
                emptyText.style.display = 'block';
                preview.classList.add('empty');
            }
        }
        
        // Application form submission
        document.getElementById('applicationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const submitText = document.getElementById('submitText');
            const submitSpinner = document.getElementById('submitSpinner');
            const btnContent = submitBtn.querySelector('.btn-content');
            
            // Show loading state
            submitBtn.disabled = true;
            btnContent.style.display = 'none';
            submitSpinner.classList.remove('hidden');
            
            try {
                const formData = new FormData(this);
                
                const response = await fetch('/api/applications/submit', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // Reset form
                    this.reset();
                    
                    // Reset image preview
                    const preview = document.getElementById('imagePreview');
                    const previewImage = document.getElementById('previewImage');
                    const emptyText = preview.querySelector('span');
                    previewImage.classList.add('hidden');
                    emptyText.style.display = 'block';
                    preview.classList.add('empty');
                    
                    // Show success section
                    showSuccessMessage();
                    showToast('Application submitted successfully!', 'success');
                } else {
                    showToast(result.error || 'Error submitting application. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showToast('Error submitting application. Please try again.', 'error');
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                btnContent.style.display = 'flex';
                submitSpinner.classList.add('hidden');
            }
        });
        
        // Show success message
        function showSuccessMessage() {
            const successSection = document.getElementById('successSection');
            const applicationSection = document.querySelector('.application-section');
            
            applicationSection.style.display = 'none';
            successSection.classList.remove('hidden');
            
            // Smooth scroll to success message
            setTimeout(() => {
                successSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 100);
        }
        
        // Reset form function
        function resetForm() {
            const successSection = document.getElementById('successSection');
            const applicationSection = document.querySelector('.application-section');
            const form = document.getElementById('applicationForm');
            
            successSection.classList.add('hidden');
            applicationSection.style.display = 'block';
            form.reset();
            
            // Reset image preview
            const preview = document.getElementById('imagePreview');
            const previewImage = document.getElementById('previewImage');
            const emptyText = preview.querySelector('span');
            previewImage.classList.add('hidden');
            emptyText.style.display = 'block';
            preview.classList.add('empty');
            
            // Scroll to form
            setTimeout(() => {
                applicationSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 100);
        }
    </script>
</body>
</html>
